See **[[ReleaseNotes]]** for bugs fixed in previous releases.

= Changes since 3.2.4 =

== Bug Fixes ==

* annotate: fetch line information by command (fixes unsafe thread access)
* guifork: use real fork() on posix to run GUI in background (fixes #3701)
* init: open repo in existing workbench process if any (fixes #3922)
* init: run "hg init" in command process (fixes #3931)
* qtapp: handle SIGINT more gracefully by sending close event to all windows
* repomodel: work around RepoLookupError that may occur while reload is pending
* repowidget: switch to default task tab after initial revision is selected
* sync: drop "recurse into subrepositories" option (closes #1645)
* workbench: disable back/forward actions when all repositories are closed
* workbench: make sure to run workbench by "New Workbench" action
* workbench: narrow --newworkbench option to command scope
* workbench: show busy indicator while command is running (fixes #1186)

== Improvements ==

* clone, init: open workbench after repository created by standalone dialog
* filectxactions: open file history dialog in annotate mode (closes #3760)
* init: add option to copy user files instead of empty .hgignore (closes #3569)
* reporegistry: mark shared repositories with a link icon overlay
* repotab: stop filesystem watcher of background tabs
* sync: never switch task tabs on revision selected
* sync: provide standalone dialog by LightRepoWindow
* workbench: forcibly reload models and views by Ctrl+refresh
* workbench: make it possible to restore the selected sync path across restarts
* workbench: restore last open repositories without loading them
* workbench: resurrect docked console widget (closes #3984)

graph:

* color: use "color hashing" to pick a color for each branch (closes #3490)
* color: use "color hashing" to pick a color for each user
* graph: support the branch grouping experiment from mercurial core
* repomodel: hide all revisions if no matches found for the given revset query
* repomodel: rerun last revset query on reload
* repoview: use a square shape for secret changesets
* repoview: use a pentagon shape for draft changesets

command:

* log: add -r option to specify the initial revision to be selected
* log: add -k/--query option to filter changesets by keyword or revset

nautilus/caja:

* add Python Caja extension support (fixes #3936)

== Installer ==

----

== Bug Fixes in Third-party Modules ==

Pygments 2.0:
* [[https://bitbucket.org/birkenfeld/pygments-main/issue/891/|PrologLexer may freeze with triple backslashes]]

Python:
* #3938 - Update bundled Python (HTTPS issues)

OpenSSL 1.0.1g:
* #3702 - Client Heartbleed vulnerability (possibly with libsvn_ra-1.dll)

QScintilla 2.8:
* Input methods are now properly supported

QScintilla 2.8.1:
* #3573 - Commit message input does not permit all unicode characters

Qt 4.8.6:
* #2300 - Workbench always opens on primary monitor when maximized
* #4006 - Incorrect Scrollbar appearence on Windows 8 (QTBUG-26503)

libsvn:
* #3745 - error 175009 - libsvn 1.6 sometimes fails to talk to svn 1.8 server

----

Random builds of the stable branch can be found at
**[[http://bitbucket.org/tortoisehg/thg-winbuild/downloads/|thg-winbuild]]**
