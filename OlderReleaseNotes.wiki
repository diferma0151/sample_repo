<<toc 1>>

= TortoiseHg 2.5.1 =

TortoiseHg 2.5.1 is a minor bug fix release

== Packaged Versions ==

* Mercurial 2.3.2
* wix: package x64 Pageant for 64bit Windows (fixes #2145)

== Bug Fixes ==

* filedialogs: only allow single selection (refs #1871)
* graft: sort graft source revisions from lowest to highest revision number (fixes #2159)
* hglib: make getDeepestSubrepoContainingFile() compatible with patchctx (fixes #2163)
* manifest: have fileIcon() handle unknown subrepo type gracefully (fixes #2174)
* repowidget: switch to outgoing context menu only if outgoing nodes exist (fixes #982)
* status: fix unicode handling at setFilter() (fixes #2168)
* sync: replace hg.islocal() on reload by lightweight alternative (fixes #2153)
* workbench: fix unicode error when opening repo via IPC channel (fixes #2135)
* workbench: work around QObject.sender() bug of PyQt 4.7.3 (fixes #2170)

== Improvements ==

* filedialogs: improve context menu descriptions
* repowidget: allow REVID as additional customtools command variable
* workbench: add help menu link to explorer help

----

= TortoiseHg 2.5 =

TortoiseHg 2.5 is a major feature release

== Packaged Versions ==

* Mercurial 2.3.1


== Bug Fixes ==

* filedata: ctx.sub() can throw a KeyError (refs #2115)
* filectxactions: descend into sub-repository if necessary (fixes #2035)
* hgqt: use setShortcuts() to preserve secondary key of StandardKey (refs #2045)
* nautilus: Fix issue #869 [1]. Nautilus extension now works
* revset: fix return key behavior (closes #2104)
* repowidget, status: delete old model on reload (refs #2119, #702)
* shortcuts: change all "Ctrl+Alt" shortcuts into "Ctrl+Shift" shortcuts (closes #1976)
* strip: fix compatibility with hg 2.3
* sync: reload the list of paths when a path is saved
* wctxactions: provide 'all' flag so that subrepo revert works (fixes #2122)

== Improvements over 2.4 ==

* compare: show "Editor Options" in menus, show horizontal scrollbars
* customtools: settings: add 'Tools' panel
  (includes format change of config file, 2f71b15196e9)
* docklog: add command history (closes #1779)
* docklog: add 'hg/thg command' completion
* filectxactions: add "Folder history" command
* filedata: add new binary detection heuristic, based on the max line length
* fileview: add 'Annotate Options' context submenu (fixes #1861)
* manifest: expand the file tree when "return" is pressed
* repofilter: restore previously selected branch (closes #1009, #1927)
* repofilter: show current working branch first (closes #2042)
* reporegistry: ensure that the selected tab item is visible
* settings: add "New Commit Phase" setting
* wctxactions: add a confirmation for revert of file types SAR! (closes #2102)
* workbench: make the task toolbar buttons configurable

----

= TortoiseHg 2.4.3 =

Released August 20, 2012

This is a scheduled minor release of TortoiseHG (2.4.3), but a major release of Mercurial (2.3)

== Packaged Versions ==

* Mercurial 2.3

Mercurial 2.3 breaks hgsubversion, so you must pull and update your
hgsubversion clone before upgrading to this release.  If you get an error
message "unable to open module repo!", then you have this problem and you must
update hgsubversion.  The same is true for hg-git, it must be updated before
you upgrade to Mercurial 2.3.

If you fail to update your extensions before upgrading, you must disable the
extensions in your Mercurial.ini file, then pull and update them, then finally
re-enable them.

== Bug Fixes ==

* bugtraq: add missing import of COMError (fixes #2013)
* commit: allow amending a revision without selecting any files
* commit: escape from mqPerformAction if canceled (fixes #2010)
* fileview: also preserve cursor position on reloading the same file (fixes #1803)
* mq: enable qreorder button if unapplied patch exists (refs #2064)
* guess: do not show unmodified largefiles as candidates for rename
* archive, rename: use getSaveFileName to select non-existent file for dest path
* reporegistry: fix unicode handling at open() called thru openClone()
* repowidget: don't clear revset text by request from filterbar (fixes #2020)
* repowidget: update menuselection even while bundle/outgoing (fixes #2052)
* revset: display "fromsvn" and "svnrev" items 0 or 1 time
* serve: minimal support for paths containing space or comma (fixes #2082)
* sync: correct logic whether to read defaultpush setting (fixes #2022)
* sync: don't show "new branch" confirmation endlessly (fixes #1615)
* sync: warn invalid port number at getfingerprint (refs #1910)
* wctxactions: do not offer the forget command for added files
* wctxactions: do not ask for revert --discard if files are not modified

== Installer ==

* Includes sspi package from pywin32

----

= TortoiseHg 2.4.2 =

Released July 2, 2012

This is a scheduled minor release, with some large packaging changes

== Packaged Versions ==

* Mercurial 2.2.3
* Python 2.7.3
* svn 1.7.5 (x86) 1.6.6 (x64)
* Installers and binaries have code signing signatures again

== Bug Fixes ==

* bugtraq: improve error handling
* commit: allow committing a merge that does not change a file
* commit: exclude all files on new/close branch if no file selected (fixes #1985)
* hgignore: ignore largefiles when scanning for untracked files (fixes #1978)
* lfprompt: catch ValueError from int() (fixes #1901)
* outgoing: fix push all command and improve outgoing infobar
* repofilter: don't disable branch options menu at all (fixes #1962)
* repowidget: bring back 'Browse at revision' menu action (closes #1920)
* sync: check if curalias is not None before using it (fixes #1950)
* tortoisehgtools: do not crash when command cannot be executed
* wctxactions: allow to overwrite existing file on copy (fixes #1983)

* fix several unicode errors

== Improvements ==

* annotate: take into account annotate settings
* graft: add basic support of graft core command
* mergetools: add support for Devart Code Compare and Code Compare 3 (Free and Pro)
* workbench: bring to front when opening a repo on Single Workbench mode

----

= TortoiseHg 2.4.1 =

Released June 8, 2012

This is a scheduled minor release

== Packaged Versions ==

* Mercurial 2.2.2
* hgcr-gui fixes

== Bug Fixes ==

* qrename: fix unicode error when displaying patch name (fixes #1914)
* rejects: ensure editing doesn't start before first line (fixes #1424, #369)
* remove unused tortoisehg/util/hgshelve.py, refs #1908
* repoview: hide "drop line" when dragging an unapplied patch to an invalid drop location
* repowidget: correct parameter for shell_notify()
* repowidget: fix 'Push all' revision context menu (was doing 'Push to here' instead)
* repowidget: refresh wctx status of commit widget by tab change (fixes #1657)
* repowidget: take into account the tortoisehg.branchcolors setting (refs #1644)
* revdetails: do not crash on visual diff for unapplied patches (fixes #1772)
* sync: append svn+https and git schemes to urlparse.uses_netloc
* sync: convert non-ascii alias/url correctly at editurl action
* sync: fix several unicode issues at SaveDialog (fixes #1883)
* sync: fix URL displayed on direct pull
* update: fix target information when updating to null revision
* workbench: fix unicode error while loading the last session

== Improvements ==

* commit: automatically set 'close branch' commit message
* graft: display graft source in changeset info when available
* repofilter: show the 'default' branch as the first branch on the branch combobox
* repowidget: make links (addresses and paths) on the infobar clickable
* sync: basic support for default push URL
* workbench: activate the tab that was active on the previous session

----

= TortoiseHg 2.4 =

Released May 5, 2012

This is a major feature release

== Packaged Versions ==

* Mercurial 2.2.1
* dulwich 0.8.5
* keyring 0.9
* Updated pageant.exe

== Bug Fixes ==

* merge: move initial focus to Next button (fixes #1868)
* update: improved bookmarks support
* openshell: show error if failed to execute shell command (fixes #1833)
* reporegistry: normalize paths of added repositories (fixes #1837)
* grep: convert filename column to unicode (fixes #1774)

== Improvements ==

* Workbench: new custom toolbar for custom commands
* Workbench: new "similar revisions.." dialog
* Workbench: optional "Single Wokbench Window" mode
* Workbench: startup progress bar
* Workbench: many more lexers enabled
* Workbench: add GitHub/BitBucket-like "README" file detection
* reporegistry: use a different icon for repositories located on UNC paths
* repowidget: keep URL of incoming bundle source as instance variable (refs #1118)
* repowidget: improve incoming pull infobar messages (fixes #1118)
* reporegistry: improve accuracy of subrepo detection when adding a repository (refs #1672)
* sync: in-place editing of URLs and aliases
* commit: add commit --amend support
* revdetails: improved display of tags and bug links

----

= TortoiseHg 2.3.2 =

Released April 23, 2012

This is a bug fix release.  Users of 2.3.n should upgrade

== Packaged Versions ==

* Mercurial 2.1.2

== Bug Fixes ==

* commit: fix traceback when issue.bugtraqparameters is not set (closes #1736)
* commit: prompt if user tries to close window while committing
* commit: truncate selected options label if needed (fixes #1731)
* icons: fix missing projrc icon (move settings-projrc.svg icon into icons/scalable)
* import: show the Import button when import fails
* manifest: do not try to edit folders except on the working directory
* manifest: handle revision links in dialog mode
* merge: do not close the wizard if a command is running (fixes #1338)
* patchctx: make phase info available for patches
* qtlib: fix handling of UNC paths (fixes #1798)
* reporegistry: improve accuracy of subrepo detection when adding a repository (refs #1672)
* reporegistry: warn if adding non-repository folder as subrepo (fixes #1830)
* repoview: forcibly clear selection on goto(rev) (fixes #1673)
* sync: disable save button when alias name is blank
* sync: hg push returns 1 if no changes found (fixes #1717)
* sync: prompt if user tries to close window while synchronizing
* tag: disable actions if a command is still running
* thgrepo: update timestamp only if changes detected successfully (fixes #1728)
* several fixes for unicode issue (#1651, #1754, #1770, #1774, #1822)

== Improvements ==

* commit: delay the bugtraq button setup to speed up the commit widget creation (closes #1734)
* commit: expand environment variables on tortoisehg.bugtraqparameters setting (closes #1733)
* compress: store/restore geometry
* nautilus: GNOME 3.2 compatibility update for nautilus-thg
* sync: improve pull/push behavior when no remote path is set
* sync: add support for editing aliases
* update: keep the state of the option expander and its expander button in sync
* workbench: improve push infobar message

----

= TortoiseHg 2.3.1 =

Released March 4, 2012

This is a bug fix release.  Users of 2.3 should upgrade

== Packaged Versions ==

* Mercurial 2.1.1

== Bug Fixes ==

* revdetails: don't test revison existence for workingctx (fixes #1617)
* sync: convert character encoding on load/save settings (fixes #1688)
* commit: display only whitelisted options (fixes #1647)
* repowidget: don't clearSelection in gotoParent (fixes #1673)

== Improvements ==

* qscilib: give the filEditor dialog a maximize button
* repowidget: limit infobar error messages to 2 lines of up to 140 chars by default
* repowidget: show all errors on infobar
* sync: improve support for hg-git extension
* largefiles: improve support of largefile extension

----

= TortoiseHg 2.3 =

Released February 14, 2012

This is a major feature release.  See 2.3-rc notes for full changes from 2.2

== Packaged Versions ==

* Mercurial 2.1
* Python keyring 0.7.2
* Mercurial_keyring 0.5
* Dulwich 0.8.3
* TortoiseOverlays 1.1.3.21564

== Bug Fixes ==

* revdetails: fall back to tip on reload if current rev is unknown (fixes #1581)
* visdiff: do not translate a debug message (closes #1595)
* settings: fix phase support detection
* manifestmodel: fix possible infinite-recursion of _buildrootentry

== Improvements ==

* qscilib: give the filEditor dialog a maximize button

----

= TortoiseHg 2.3-rc =

Released February 5, 2012

This is a major feature release

== Packaged Versions ==

* Mercurial 2.1
* Python keyring 0.7.2
* Mercurial_keyring 0.5
* Dulwich 0.8.3
* TortoiseOverlays 1.1.3.21564

== Bug Fixes ==

* shelve: prevent the use of bad characters in shelf files (fixes #765)
* sync: emit a message when outgoing --subrepo completes (closes #1564)
* qimport: check for existing patches (fixes #1569)
* commit: ensure autoinc files are included (closes #737)
* shelve: verify chunks are non-empty before proceeding (closes #1552)
* repotreeitem: sort subrepos by name by default (closes #1251)
* status: don't use thgrepo in thread (refs #1505)
* branchop, etc: fix encoding of repo.namedbranches in branchop dialog comboBox
* update: default the confirmation to "cancel" (closes #1325)
* thread: catch socket errors including SSLError (closes #1520)

== Improvements ==

* supprt for Mercurial phases in repowidget
* shellext - support for largefile extension
* new registry keys for DiffMerge 3.3
* settings: add defaultpush configuration setting
* "Go To Revision" button with shortcut CTRL+/
* workbench: add shortcut for "rollback" command (Ctrl-u)
* reporegistry: add cmenu sort actions for groups (closes #1189)
* repofilter: add "author(username)" permanent query
* repofilter: add "bookmark()" permanent query
* settings: add defaultpush configuration setting
* manifestmodel: add method to filter files by glob pattern
* manifest: add filter box to file tree
* commit: show selected options (closes #1491)
* filedialogs, manifest: add "save at revision" to cmenu (closes #1500)
* commit: support --subprepos option in DetailsDialog (closes #1379)
* commit: handle tolocal conversion failures more gracefully (closes #1516)
* revpanel: add source revision item for converted changesets
* repomodel: add column for source revision of converted changesets

== Installer ==

* hgfold extension removed, it no longer worked with modern Mercurial
* added projrc extension - https://bitbucket.org/aragost/projrc/
* pulled latest TortoisePlink executables from TortoiseSVN, x64 and x86 versions
* upgraded to most recent TortoiseOverlay merge modules
* upgraded to most recent diff/merge scripts

----

= TortoiseHg 2.2.2 =

Released January 2, 2012

This is a bug fix release.  All users of 2.2.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 2.0.2

== Bug Fixes ==

* update: fixes for non-ascii branch names
* desktop: fix icon name (closes #1387)
* reporegistry, etc: allow non-ascii names to be submitted to clipboard
* visdiff: catch environment errors from snapshot file creation (closes #1499)
* rupdate: fix error when thg is run outside of the repository
* run: handle duplicated exceptions of the same type gracefully (fixes #1464)
* wconfig: translate ParsingError of iniparse to error.ParseError (refs #1512)

== Improvements ==

* repomodel: allow all patches to be reordered
* quickop: improved large file support
* quickop: improvements to initial check status
* status:  context menu for checking/unchecking selected files

----

= TortoiseHg 2.2.1 =

Released December 3, 2011

This is a bug fix release.  All users of 2.2.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 2.0.1

== Bug Fixes ==

* commit: use cmd runner for rollback operations (fixes #1436)
* desktop: fix icon name (closes #1387)
* repowidget: manually reverse compress arguments (fixes #1344)
* thgrepo: wrap changectx.sub() to return thgrepo-aware subrepo obj (fixes #1386)
* chunks: catch ValueError from internalpatch (fixes #1249)
* commit: use command runner for rollback (fixes #1436)
* hgignore: catch IndexError while building pats list (fixes #1204)
* grep: fix #1428 rev and line are now sorted numerical
* manifest: don't test file status of directory node on doubleclick (fixes #1408)
* manifest: fix error while displaying subrepo (fixes #1386)
* repowidget: capture commit widget output (#1379)
* repowidget: manually reverse compress arguments (fixes #1344)
* shlib: call close() instead of rename() on Mercurial 2.0+ (fixes #1397)
* filedata: fix mode-only change detection on working dir
* grep: fix #1428 rev and line are now sorted numerical
* update: wctx.modified() is prone to throw EnvironmentError (closes #1435)
* visdiff: use os.makedirs() to re-create diff folder when necessary (fixes #1151)
* wctxactions: fix encoding of warning messages coming from hg

== Improvements ==

* commit: add several actions to subrepo context menu
* commit: make stand-alone dialog support mq
* rebase: add collapse rebased changesets option (fixes #1381)
* repomodel: more stable branch colors
* reporegistry: improve error handling while adding a subrepository
* repowidget: make double clicking an applied patch qgoto that patch (closes #1044)
* repowidget: add "Goto common ancestor" command in pop-up menu
* revdetails: add "Copy Path" in pop-up menu
* sync: add support for the --mq option in the sync tool
* workbench: add "Goto revision" command

----

= TortoiseHg 2.2 =

Released November 6, 2011

This is a feature release.

== Packaged Versions ==

* Mercurial 2.0
* Dulwich 0.8.1

== Bug Fixes ==

* backout: verify the working parent (fixes #1304)
* chunks, thgrepo: catch race conditions querying mtime (fixes #1327)
* export: fix unicode error when exporting a single changeset (fixes #1352)
* hgstrip: allow revision 0 to be stripped
* manifest: handle non-ascii filename passed from command-line (fixes #1167)
* mmerge: catch EnvironmentError from wctx.dirty() in check thread (fixes #1336)
* repomodel: remove circular reference to self from _columnmap (fixes #1254)
* reporegistry: Add subrepos could fail due to case and forward/backward slash differences
* repoview: trap EnvironmentError in saveSettings() (fixes #1330)
* settings: pass non-ascii filename correctly to file editor
* visdiff: properly detect copies/renames on Windows (closes #742, #679)

== Improvements ==

* commit: add setting to automatically refresh the status list when it is shown (#143)
* hgignore: prompt to add newly created .hgignore file
* i18n: add Arabic, Indonesian and Javanese translations
* qscilib: make autocomplete configurable, disabled by default
* settings: add setting to open new tabs next to the current tab
* fileview: better appearance of horizontal scroll bar
* largefiles/kbfiles: add support for largefiles and kbfiles extensions
* reporegistry: allow dragging groups into groups
* reporegistry: close the relative tab when repository is removed from registry
* sync: added support for pushing or pulling a specific branch (fixes #1012)
* shellext: improved Unicode support

----

= TortoiseHg 2.1.4 =

Released October 5, 2011

This is a bug fix release.  All users of 2.1.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 1.9.3

== Bug Fixes ==

* filedata: normalize add/rename checks for binary files (fixes #1152)
* repotreeitem: Handle all exceptions that may happen during appendSubrepos (closes #1175)
* chunks: handle perm errors from revert() calls that delete files (fixes #1215)
* sync: no parent is available in parseurl (fixes #1216)
* repofilter: ignore errors in saveSettings (fixes #1235)
* reporegistry: Do not try to show subrepos for non mercurial repositories (closes #1085)
* repowidget: do not allow visualDiffToLocal to use the working dir (fixes #1247)
* mq: fix calls to QuestionMsgBox (closes #1257)
* sync: use str.split instead of QString.split at ssh url parsing (fixes #1280)
* mergetools: add regkeyalt for BeyondCompare (closes #1264)
* repowidget: catch ValueError from rebuildGraph() (closes #1269)

== Improvements ==

* export: set the default patch name to the rev number when exporting a single revision <<changeset f6f4546dd6da>>
* hgignore: add context menu for {{{**}}} <<changeset 0e16f7eb45c7>> and double click action <<changeset 66cc70957f66>>

----

= TortoiseHg 2.1.3 =

Released August 28, 2011

This is a bug fix release.  All users of 2.1.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 1.9.2

== Bug Fixes ==

* repowidget: clear infobar at start of sync operation (fixes #965)
* #999 - UnicodeDecodeError in Annotation files dialog
* #1000 - Visual diff with local fails on stand-alone annotation dialog
* #1036 - UnicodeDecodeError when export a commit to patch
* #1042 - ImportError: No module named thginithook
* #1049 - missing last character of history search result
* #1050, #1057 - goto revision not work (nodeid hyperlink / after-pull focus)
* #1080 - KeyError 'ignorecase' in manifestdialog.py
* #1088 - branch filter fails to display non-ascii characters
* Probable workaround for hard crashes during Python garbage collection

== Improvements ==

* Numerous layout and behavior tweaks

----

= TortoiseHg 2.1.2 =

Released August 1, 2011

This is a bug fix release.  All users of 2.1.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 1.9.1
* Dulwich 0.8.0

== Bug Fixes ==

* fileview: catch mode changes while diff marker thread is active (fixes #921)
* fileview: fix syntax error (close #922)
* repowidget: clear filter text in clearRevisionSet() (closes #925)
* qtlib: HgRepoView.forward() must forward keyword parameters
* reporegistry: fix unicode handling at addSubrepo() (fixes #947)
* filedata: handle 'removed and dirty' subrepo state (closes #934)
* repowidget: abort bundle pulls if self.bundle is None (closes #959)
* commit: catch TypeError from guess_lexer_for_filename (closes #962)
* repoview: ensure that revision being selected is visible (fixes #946)
* manifestdialog: only pass a Workbench window as repoviewer (fixes #938)
* status: update check box to match file check states (fixes #960)
* revset: respond to the arrow keys (fixes #833)
* qtlib: open only existing paths in terminal
* manifest: do not crash when calling revert on the working directory
* revert: throw a ValueError, rather than crashing, when reverting to the None rev
* reporegistry: better common path extraction on Windows
* messageentry: allow resizing commit message box down to one line (fixes #44)
* sync: require that port be numeric and in the appropriate range (fixes #994)
* workbench: showRepo() takes a QString or Unicode string (closes #1003)
* manifestdialog: set ignorecase during init, fixes highlighting on Annotate File in search
* workbench: do not reopen repos during startup until subrepos have been loaded into the registry (closes #1017)
* qtlib: make InfoBar word-wrap long status/error message (fixes #1031)
* grep: convert ctx search results to unicode before dispalying in tableview
* thgrepo: add option not to monitor changes on network drives (refs #889)
* repoview: fixes ctrl click behavior reported in #1019

== Improvements ==

* backout: add support for backing out merge revisions
* many layout improvements
* add background-color support to diff lexer
* update: add checkbox for --verbose
* registry: Add keyboard shortcut for delete (Suppr) and rename(F2)
* sync: allow username to be edited in ssh hostentry (closes #964)
* bugreport: include encoding value in report text
* cmdui: show red error message if command fails
* status: hide check boxes in standalone status browser
* several usability improvements to the settings tool
* reporegistry: mark .hgsub file for add when it is created
* reporegistry: Make sure that the item corresponding to the active tab is visible

----

= TortoiseHg 2.1.1 =

Released July 7, 2011

This is a bug fix release.  All users of 2.1 are recommended to upgrade

== Packaged Versions ==

* Mercurial 1.9+10 (tip of stable branch)
* Updated perfarce extension, now hg-1.9 compatible

== Bug Fixes ==

* sync: move import of paths to top of the file (fixes #853, etc)
* hgcrutil: add missing import of _() (closes #852)
* NameError: global name 'paths' is not defined (#853)
* wctxactions: give parent to transient menus (closes #716)
* repomodel: reorder colors in Changes column (refs #776)
* sync: do not use --bookmark argument for target in in/out commands (refs #901)
* wctxactions: fix rename from status/commit dialogs (fixes #902)
* thg: workaround for resolve tool bug (fixes #891)
* archive: fix bad handling of non-ascii path (fixes #883)
* thg: reintroduce stderr capture (closes #856)
* shelve: fix shelf creation when .hg/shelves must be created
* visdiff: fix possible unicode error at launchtool (fixes #796)
* fileview: avoid unwanted unicode issue at timerBuildDiffMarkers (fixes #857)
* shellext: additionally use GetDriveType for local disks check (closes #842)

----

= TortoiseHg 2.1 =

Released July 1, 2011

This is a major feature release

== Packaged Versions ==

* Mercurial 1.9

== Bug Fixes ==

* only read hgrc files of related repositories on local disks (fixes #537)
* filedata: note when binary files have been added (fixes #849)
* shelve: do not use repo.opener to create new shelf files (refs #832)
* thgrepo: ignore folders in the shelve directory (fixes #832)
* wix: catch up with Mercurial b30c889584ef (fixes #844)
* status: double click signal was redundant with default wctxaction (fixes #848)
* wctxactions: pass absolute paths to commands.resolve() (closes #747)
* guess, wctxactions: workingctx.remove() has been obsoleted (closes #840) 
* repofilter: added option to display only active branches (closes #577)
* revdetails: disable actionShowAllMerge by default (closes #818)
* revert: handle non-ascii filenames in prompt (closes #824)
* wctxactions: fix error message (closes #781)
* thgimport: do not import if no patch available (fixes #773)

And dozens more fixes made in the last four months...

== Improvements ==

Many improvements based on user feedback after the 2.0 launch

* (manifest) uses the same file display widget as revdetails and commit
* (fileview) improved controls for merge revisions
* (commit) improved layout of file filter and checkbox features
* (bugtraq) integration with BugTraQ COM interface
* (sync) notification bar, and busy icon on repository tabs
* (registry) automatically picks up changes made in other processes
* (registry) detect nested repositories and subrepositories
* (workbench) uses QFileSystemWatcher to get file system notifications
* (file history) added context menu for file revision features
* (mq) new patch queue dock widget, qnew/qrefresh support in commit tool
* (merge) improvements to the merge wizard layout and flow
* (backout) refactored the backout tool as a QWizard
* (workbench) user can configure default widget and revision shown at startup
* (workbench) add bundle creation features

== Installer ==

* new zipdoc extension

[[OlderReleaseNotes]]
= TortoiseHg 2.0.5 =

Released June 1, 2011

This is a scheduled bug fix release with a number of minor improvements

== Packaged Versions ==

* Mercurial 1.8.4
* Dulwich 0.7.1

== Bug Fixes ==

* #206 - (detect renames) fix keyboard navigation
* #433 - (visdiff) prevent UnicodeDecodeError while launching diff tool
* #502 - (Workbench) warn if export would append an existing patch file
* #632 - (commit) fix performance issues when toggling a large number of files
* #637 - (clone) TypeError: coercing to Unicode: need string or buffer, NoneType found
* #638 - (merge) use the same fallback methods as the commit tool to get a username
* #641 - (Workbench) catch ConfigError globally and try to help user recover
* #637 - (shelve) fix unshelve behavior on merged working directories
* #652 - (Workbench) fix performance when viewing large files
* #653 - (filehistory) prevent tracebacks from clicking on the background
* #661 - filedata: catch aborts while checking for binary status
* #662 - (manifest) disable context menu if no rows are selected
* #676 - validate --repository argument before use
* #682 - (import) avoid string decoding errors by using QDir native methods
* #701 - (setup) fix path manipulation on POSIX platforms
* #710 - (shelve) catch AttributeError tracebacks from patch parser
* #712 - (commit) ignore autoinc when committing a merge
* #738 - (ignore) fix multiple selection behavior
* #745 - (tag) fix tracebacks from certain error conditions
* #754 - (Workbench) fix traceback when viewing empty filter
* #755 - (annotate)  prevent UnicodeDecodeError when annotating files
* #756 - (Workbench) prevent KeyError when configuring columns without an open repo
* #759 - (Workbench) catch zlib.error globally and request a refresh

== Improvements ==

* (Workbench) CTRL+W shortcut for closing tabs on Windows
* (Workbench) do not try to parse dragged binary files as patches
* (update) persist some options
* (detect renames) improvements to dialog workflow
* (commit) auto-refresh when the repository's working parents are changed
* (revset) show a clearer message when no matches were found
* (shelve) sort shelve files by their modification times
* (filterbar) improve clear and close behavior
* (qimport) improved behavior when patch names would conflict
* filedata: improve the display of subrepositories in some uncommon states

== Installer ==

* hgcr extension (Qt version) is now bundled again
* library.zip now includes json #736 

----

= TortoiseHg 2.0.4 =

Released May 1, 2011

This is a scheduled bug fix release with a number of minor improvements

== Packaged Versions ==

* Mercurial 1.8.3
* Pygments 1.4

== Bug Fixes ==

* #42  - cmdui: make sure newly opened prompt line is visible
* #446 - fix visual diffs of incoming changesets
* #462 - avoid encoding errors in the shelve tool by avoiding unicode round trip
* #504 - fix incompatibility with Google Pinyin input method
* #509 - Merge and backout dialogs did not respect push-after-commit
* #512 - handle non-ascii repository name during export and archive
* #514 - disallow consecutive clones to the same destination folder
* #516 - shelve buttons not disabled when a patch was empty
* #517 - fix shelving of chunks that have the same starting line
* #531 - prevent hard crashes seen after previewing incoming changesets
* #541 - do not create annotate menus if annotation thread has not reached current line
* #542 - fix branch name encoding mixup
* #547 - validate index in filelistview before generating a context menu
* #552 - rebase: disable buttons during wctx check
* #555 - cmenu: add annotate to file selection context menu
* #558 - workbench: do not try to open ssh:// URLs as local repositories
* #562 - hgignore: better handle wctx errors in the refresh function
* #570 - fix UnicodeDecodeErrors in annotation view
* #576 - fix UnboundLocalError in hgignore
* #579 - do not needlessly insert a newline between shelved patches
* #595 - add missing import for _() in qtlib
* #599 - catch environment errors when repowidgets are closed
* #608 - prevent IndexError during refresh of file history dialogs
* #612 - serve: respect repo's configured http port
* #614 - rename: fix display of non-ascii paths
* #623 - sync: properly handle ssh urls that have '@' in the username
* fix support for Python2.4

== Improvements ==

* #52 - allow reordering of groups in the reporegistry, along with their content
* sync - display currently selected push/pull options
* #275 - status/commit: allow fileview to be compressed beyond file name
* status/commit: double click opens visual diffs for single file
* #565 - status/commit: support auto-excludes
* clone - use a subprocess to perform perforce clones (using the perfarce extension)
* clone - it's now possible to select another patch queue than the default one for qclone
* #601 - add --keepbranches option to rebase dialog
* #610 - allow use of numeric keypad Enter key for most shortcuts
* #326 - offer 'default' and 'default-push' as drop-down options for 'push after commit'
* #569 - bundle distutils in binary packages, fixes pygments including the lexer used to generate completion strings in the commit tool.
* rename - use repository manifest as line edit completer

== Installer ==

* package Qt translations for standard buttons, etc
* many translation improvements
* Updated TortoisePlink to the current version shipped with TortoiseCVS

----

= TortoiseHg 2.0.3 =

Released April 1, 2011

This is a scheduled bug fix release with a number of minor improvements

== Packaged Versions ==

* Mercurial 1.8.2

== Bug Fixes ==

* #81 - improve labels of merge buttons in resolve dialog
* #161 - prevent qrename from using an existing patch name
* #174 - prevent file history from being launched from shelve dialog
* #193 - open visual diffs on double-click
* #229 - libsasl.dll was missing from x86 packages
* #269 - give quickop dialog the ability to delete unversioned files
* #282 - validate the correct postreview extension is in use
* #295 - shelve: fix race condition in detecting shelf file changes
* #300 - hgignore: catch errors during repo.status() call
* #302 - sync widget could show the lock button for local urls
* #306 - outgoing can cause IndexError in setRevisionSet
* #307 - fix crash in templatefilters caused by bad patches
* #311 - UnicodeDecodeError in rename dialog
* #318 - dragging URLs from registry to sync tab should not delete URL from registry
* #319 - Workbench: update sync tooltips to reflect their current behavior
* #325 - TypeError raised by os.path.isfile() in thgrepo.changectx()
* #328 - chunks: UnicodeDecodeError while moving chunks
* #330 - wctxactions: UnicodeDecodeError while showing warnings/errors
* #331 - sync: ignore .hg/rebasestate if --rebase was not used in command
* #335 - enforce maxdiffsize when displaying deleted files
* #336 - commit: clear branch operation after every successful commit
* #338 - grep: prevent AttributeError after stopping a search
* #340 - grep: catch I/O errors while scanning working directory
* #342 - repotreemodel: validate internalPointer(), prevent a TypeError
* #346 - UnicodeDecodeError in bug report dialog save function
* #347 - registry: fix deletion behavior
* #348 - Assign "changelog" font to revisioned text without a lexer
* #359 - LookupError from ambiguous revision set query
* #360 - Prevent certain tracebacks in file history dialogs
* #361 - shelve: catch environment errors while patching
* #364 - qfold: fix patch message decoding
* #371 - shelve: catch an empty patch being applied
* #373 - Fix abort when command needs a repository but was not within one
* #378 - dropping a patch on the MQ tab was broken
* #379 - backout: improve UI at the end of the operation
* #381 - commit: do not pre-check unknown files even when they match filter
* #387 - ignore: fix context menu behavior
* #391 - status: prevent errors on button presses when model is empty
* #393 - update: check subrepo status before using update --clean
* #401 - fix repeated visual diffs of working folder
* #402 - fileview: catch generic file and lookup errors
* #405 - sync: catch environment errors when opening a terminal
* #406 - sync: cast exceptions to strings before converting to unicode
* #408 - commit: prevent IndexError in message history maintenance
* #410 - guess: fix unicode decode errors in path display
* #411 - workbench: add unicode conversion when openRepo fails
* #412 - settings: add unicode conversion when repo does not exist
* #417 - repotreeitem: catch RepoError more cleanly
* #422 - hgemail: prevent exceptions on empty change messages
* #423 - annotate: properly handle bundle previews
* #429 - generically capture exceptions while gathering graph data
* #431 - sync: use the given port when querying server certificate
* #442 - shelve: respect user's patch.eol configuration
* #453 - fix translation of Filenames column
* #460 - status: catch more errors during refresh
* #467 - rejects: preserve eoln state of patch chunks
* #469 - prevent race conditions after pulling from a bundle
* #472 - fix color extension use from shells opened by THG
* #473 - displayed revision sets should respect current branch filter
* #474 - purge: give purge thread its own repo object, prevents hazards
* #478 - remember selected revision when toggling filter mode
* #489 - disable the hiding of the file history toolbars
* #493 - fix progress signals from output log widget
* Workbench: properly show search bar state at startup

== Improvements ==

* #247, #297 - commit: show progress bar, disable commit button, add a stop button during commit
* #313 - add transplant menu option to multiple-selection menus
* #366 - archive: support subrepositories
* #385 - merge: improve default merge message for named branch merges
* #436 - hide filter bar if cleared twice or return pressed on empty entry
* #458 - resolve: show local and other revision summaries
* grep: recursively scan Mercurial subrepositories when searching the working directory
* status: share status button with manifest tool
* serve: improve support for subrepositories
* sync: more effectively filter duplicate paths from related paths list
* Workbench: improve graph resize logic
* Workbench: close repository tabs by middle-click
* Workbench: display modified subrepositories in revision details tab
* fileview: add eoln visibility toggle to context menus
* Free entire repository tab widget when it is closed
* Better use of user configured Windows fonts

== Installer ==

* Added a number of new translations

----

= TortoiseHg 2.0.2 =

Released March 10, 2011

This is a quick fix build for a regression (#309) in 2.0.1.

= TortoiseHg 2.0.1 =

Released March 10, 2011

This is a bug fix release with minor improvements

== Packaged Versions ==

* Mercurial 1.8.1

== Bug Fixes ==

* #60, #201, #239 - drop bin/ folder, add root folder to %PATH%
* #78 - clone: use native path separators in path names
* #173 - manifest: IndexError: list index out of range
* #177 - show bookmarks in update dialog, fix bookmark behavior, improve bookmark dialog
* #178 - visdiff: KeyError from toolSelect
* #181 - visdiff: TypeError: p1dirdiff() takes exactly 2 arguments (1 given)
* #183 - visdiff: TypeError: argument of type 'NoneType' is not iterable
* #185 - settings: extensions page was confused by 'hgext.' prefixes
* #187 - documentation fix (f.i.)
* #189 - settings: no configuration for issue tracker linking
* #194 - qtlib: TypeError: signal clicked(bool) has 1 argument(s)Key
* #197 - fileview: fix diff markers in file mode
* #198 - compare file history: convert file data to unicode before displaying
* #202 - workbench: Abort: no username supplied (see "hg help config")
* #203 - compress: AttributeError: 'Widget' object has no attribute 'stbar'
* #204 - commit: "No files found for this operation"
* #205 - commit: handle non ASCII encoded filenames
* #209 - x64 Mercurial could not find 32bit diff/merge tools
* #212 - shelve: AttributeError: 'ChunksWidget' object has no attribute 'mtime'
* #213, #232 - repowidget: catch errors when selecting a revision
* #214 - settings: UnicodeDecodeError from username
* #225 - sync: catch ssh URL parse errors
* #227 - run: catch environment errors when opening repositories
* #228 - manifest: models leaked memory
* #229 - x86 packages did not have all the SVN SWIG DLLs
* #230 - about: do not block dialog closing on network errors
* #231 - AttributeError: 'SyncWidget' object has no attribute 'targetargs'
* #233 - sync: keep bundle file in local encoding
* #234 - clipboard: fix encoding of data sent to the clipboard
* #246 - merge: AttributeError: 'ResultPage' object has no attribute 'reject'
* #264 - sync: catch errors from fingerprint query
* #268 - show clean file contents
* #276 - unshelve not applying chunks to dos EOLN files
* Fix file dragging into applications like VisualStudio

== Improvements ==

* improve performance of sync tool startup, do not open related repositories
* preserve changeset graph column widths per repository
* improve sorting behavior in the status tool and its derivatives
* sync: add --debug flag to the options dialog
* verify and enforce minimum Qt/PyQt versions

== Installer ==

* x64 installers now provide 64bit native PyQt applications, which means they no longer install in Program Files (x86), they install in Program Files.
* hg.exe and thg.exe are in the %PATH% again, unlike the 2.0 installers.  The bin/ folder has been removed.
* kdiff3.exe is again in the %PATH%
* kdiff3.exe was upgraded from the 1.1 release to the 2.0 release.  It appears to have a bug when reading its old configuration files that cause it to save merge results in DOS EOLN.  If you are upgrading a 1.1 install or have run KDiff3 in the past, it is suggested to run the new KDiff3 and check this configurable.

----

= TortoiseHg 2.0 =

Released March 1, 2011

This is a major feature release.  All of the TortoiseHg applications
have been converted from PyGtk to PyQt.

* http://tortoisehg.bitbucket.org/manual/2.0/whatsnew.html
* http://tortoisehg.bitbucket.org/screenshots.html

== Packaged Versions ==

* Mercurial 1.8
* Qt 4.7.1
* PyQt 4.8.2
* dulwich 0.7.0

== Installer ==

* x64 installers now provide 64bit native PyQt applications, which means they no longer install in Program Files (x86), they install in Program Files.
* hg.exe and thg.exe are not in %PATH%, we add a bin\ folder with short batch files.  TortoisePlink and Pageant.exe are also in the bin\ folder so they remain in the path.
* kdiff3.exe is not in the system path, since it uses the same QT dlls as TortoiseHg it needs to be in the root folder.
* kdiff3.exe was upgraded from the 1.1 release to the 2.0 release.  It appears to have a bug when reading its old configuration files that cause it to save merge results in DOS EOLN.  If you are upgrading a 1.1 install or have run KDiff3 in the past, it is suggested to run the new KDiff3 and check this configurable.
