= Release Notes for TortoiseHg =

This wiki page contains last minute notes to users about the releases,
which may not be included in the documentation or README files included
with the distribution kits.  It also contains change information, for
users who are interested in what bugs have been fixed, and what features
have been added in the current version.

**Note that like TortoiseSVN, [[http://www.selenic.com/pipermail/mercurial/2010-January/029680.html|we recommend]] to to turn off the indexing service on the working copies and repositories, and exclude them from virus scans.**

<<toc>>

== Matching Versions ==

If you are using TortoiseHG from source, we recommend you use the most
recent stable releases of TortoiseHG and Mercurial together.  If you must use
an older version of Mercurial, please consult the following chart:

|= Mercurial Release |= TortoiseHg Release |
| <= 1.0 | 0.5 |
| 1.1.X | 0.6 |
| 1.2.X | 0.7.6 |
| 1.3.X | 0.8.n |
| 1.4.x | 0.9.n |
| 1.5.x | 1.0.n |
| 1.6.x | 1.1.n |
| 1.7.x | 1.1.9.1 |
| 1.8.x | 2.0.n |
| 1.9.x | 2.1.n |
| 2.0.x | 2.2.n |
| 2.1.x | 2.3.n |
| 2.2.x | 2.4.n |
| hg default tip | thg default tip |

----

= TortoiseHg 2.4.3 =

Released August 20, 2012

This is a scheduled minor release of TortoiseHG (2.4.3), but a major release of Mercurial (2.3)

== Packaged Versions ==

* Mercurial 2.3

Mercurial 2.3 breaks hgsubversion, so you must pull and update your hgsubversion clone before upgrading to this release.  If you get an error message "unable to open module repo!", then you have this problem and you must update hgsubversion.

= Fixed since 2.4.2 =

* bugtraq: add missing import of COMError (fixes #2013)
* commit: allow amending a revision without selecting any files
* commit: escape from mqPerformAction if canceled (fixes #2010)
* fileview: also preserve cursor position on reloading the same file (fixes #1803)
* mq: enable qreorder button if unapplied patch exists (refs #2064)
* guess: do not show unmodified largefiles as candidates for rename
* archive, rename: use getSaveFileName to select non-existent file for dest path
* reporegistry: fix unicode handling at open() called thru openClone()
* repowidget: don't clear revset text by request from filterbar (fixes #2020)
* repowidget: update menuselection even while bundle/outgoing (fixes #2052)
* revset: display "fromsvn" and "svnrev" items 0 or 1 time
* serve: minimal support for paths containing space or comma (fixes #2082)
* sync: correct logic whether to read defaultpush setting (fixes #2022)
* sync: don't show "new branch" confirmation endlessly (fixes #1615)
* sync: warn invalid port number at getfingerprint (refs #1910)
* wctxactions: do not offer the forget command for added files
* wctxactions: do not ask for revert --discard if files are not modified

== Installer ==

* Includes sspi package from pywin32

----

= TortoiseHg 2.4.2 =

Released July 2, 2012

This is a scheduled minor release, with some large packaging changes

== Packaged Versions ==

* Mercurial 2.2.3
* Python 2.7.3
* svn 1.7.5 (x86) 1.6.6 (x64)
* Installers and binaries have code signing signatures again

== Bug Fixes ==

* bugtraq: improve error handling
* commit: allow committing a merge that does not change a file
* commit: exclude all files on new/close branch if no file selected (fixes #1985)
* hgignore: ignore largefiles when scanning for untracked files (fixes #1978)
* lfprompt: catch ValueError from int() (fixes #1901)
* outgoing: fix push all command and improve outgoing infobar
* repofilter: don't disable branch options menu at all (fixes #1962)
* repowidget: bring back 'Browse at revision' menu action (closes #1920)
* sync: check if curalias is not None before using it (fixes #1950)
* tortoisehgtools: do not crash when command cannot be executed
* wctxactions: allow to overwrite existing file on copy (fixes #1983)

* fix several unicode errors

== Improvements ==

* annotate: take into account annotate settings
* graft: add basic support of graft core command
* mergetools: add support for Devart Code Compare and Code Compare 3 (Free and Pro)
* workbench: bring to front when opening a repo on Single Workbench mode

----

= TortoiseHg 2.4.1 =

Released June 8, 2012

This is a scheduled minor release

== Packaged Versions ==

* Mercurial 2.2.2
* hgcr-gui fixes

== Bug Fixes ==

* qrename: fix unicode error when displaying patch name (fixes #1914)
* rejects: ensure editing doesn't start before first line (fixes #1424, #369)
* remove unused tortoisehg/util/hgshelve.py, refs #1908
* repoview: hide "drop line" when dragging an unapplied patch to an invalid drop location
* repowidget: correct parameter for shell_notify()
* repowidget: fix 'Push all' revision context menu (was doing 'Push to here' instead)
* repowidget: refresh wctx status of commit widget by tab change (fixes #1657)
* repowidget: take into account the tortoisehg.branchcolors setting (refs #1644)
* revdetails: do not crash on visual diff for unapplied patches (fixes #1772)
* sync: append svn+https and git schemes to urlparse.uses_netloc
* sync: convert non-ascii alias/url correctly at editurl action
* sync: fix several unicode issues at SaveDialog (fixes #1883)
* sync: fix URL displayed on direct pull
* update: fix target information when updating to null revision
* workbench: fix unicode error while loading the last session

== Improvements ==

* commit: automatically set 'close branch' commit message
* graft: display graft source in changeset info when available
* repofilter: show the 'default' branch as the first branch on the branch combobox
* repowidget: make links (addresses and paths) on the infobar clickable
* sync: basic support for default push URL
* workbench: activate the tab that was active on the previous session

----

= TortoiseHg 2.4 =

Released May 5, 2012

This is a major feature release

== Packaged Versions ==

* Mercurial 2.2.1
* dulwich 0.8.5
* keyring 0.9
* Updated pageant.exe

== Bug Fixes ==

* merge: move initial focus to Next button (fixes #1868)
* update: improved bookmarks support
* openshell: show error if failed to execute shell command (fixes #1833)
* reporegistry: normalize paths of added repositories (fixes #1837)
* grep: convert filename column to unicode (fixes #1774)

== Improvements ==

* Workbench: new custom toolbar for custom commands
* Workbench: new "similar revisions.." dialog
* Workbench: optional "Single Wokbench Window" mode
* Workbench: startup progress bar
* Workbench: many more lexers enabled
* Workbench: add GitHub/BitBucket-like "README" file detection
* reporegistry: use a different icon for repositories located on UNC paths
* repowidget: keep URL of incoming bundle source as instance variable (refs #1118)
* repowidget: improve incoming pull infobar messages (fixes #1118)
* reporegistry: improve accuracy of subrepo detection when adding a repository (refs #1672)
* sync: in-place editing of URLs and aliases
* commit: add commit --amend support
* revdetails: improved display of tags and bug links

----

= TortoiseHg 2.3.2 =

Released April 23, 2012

This is a bug fix release.  Users of 2.3.n should upgrade

== Packaged Versions ==

* Mercurial 2.1.2

== Bug Fixes ==

* commit: fix traceback when issue.bugtraqparameters is not set (closes #1736)
* commit: prompt if user tries to close window while committing
* commit: truncate selected options label if needed (fixes #1731)
* icons: fix missing projrc icon (move settings-projrc.svg icon into icons/scalable)
* import: show the Import button when import fails
* manifest: do not try to edit folders except on the working directory
* manifest: handle revision links in dialog mode
* merge: do not close the wizard if a command is running (fixes #1338)
* patchctx: make phase info available for patches
* qtlib: fix handling of UNC paths (fixes #1798)
* reporegistry: improve accuracy of subrepo detection when adding a repository (refs #1672)
* reporegistry: warn if adding non-repository folder as subrepo (fixes #1830)
* repoview: forcibly clear selection on goto(rev) (fixes #1673)
* sync: disable save button when alias name is blank
* sync: hg push returns 1 if no changes found (fixes #1717)
* sync: prompt if user tries to close window while synchronizing
* tag: disable actions if a command is still running
* thgrepo: update timestamp only if changes detected successfully (fixes #1728)
* several fixes for unicode issue (#1651, #1754, #1770, #1774, #1822)

== Improvements ==

* commit: delay the bugtraq button setup to speed up the commit widget creation (closes #1734)
* commit: expand environment variables on tortoisehg.bugtraqparameters setting (closes #1733)
* compress: store/restore geometry
* nautilus: GNOME 3.2 compatibility update for nautilus-thg
* sync: improve pull/push behavior when no remote path is set
* sync: add support for editing aliases
* update: keep the state of the option expander and its expander button in sync
* workbench: improve push infobar message

----

= TortoiseHg 2.3.1 =

Released March 4, 2012

This is a bug fix release.  Users of 2.3 should upgrade

== Packaged Versions ==

* Mercurial 2.1.1

== Bug Fixes ==

* revdetails: don't test revison existence for workingctx (fixes #1617)
* sync: convert character encoding on load/save settings (fixes #1688)
* commit: display only whitelisted options (fixes #1647)
* repowidget: don't clearSelection in gotoParent (fixes #1673)

== Improvements ==

* qscilib: give the filEditor dialog a maximize button
* repowidget: limit infobar error messages to 2 lines of up to 140 chars by default
* repowidget: show all errors on infobar
* sync: improve support for hg-git extension
* largefiles: improve support of largefile extension

----

= TortoiseHg 2.3 =

Released February 14, 2012

This is a major feature release.  See 2.3-rc notes for full changes from 2.2

== Packaged Versions ==

* Mercurial 2.1
* Python keyring 0.7.2
* Mercurial_keyring 0.5
* Dulwich 0.8.3
* TortoiseOverlays 1.1.3.21564

== Bug Fixes ==

* revdetails: fall back to tip on reload if current rev is unknown (fixes #1581)
* visdiff: do not translate a debug message (closes #1595)
* settings: fix phase support detection
* manifestmodel: fix possible infinite-recursion of _buildrootentry

== Improvements ==

* qscilib: give the filEditor dialog a maximize button

----

= TortoiseHg 2.3-rc =

Released February 5, 2012

This is a major feature release

== Packaged Versions ==

* Mercurial 2.1
* Python keyring 0.7.2
* Mercurial_keyring 0.5
* Dulwich 0.8.3
* TortoiseOverlays 1.1.3.21564

== Bug Fixes ==

* shelve: prevent the use of bad characters in shelf files (fixes #765)
* sync: emit a message when outgoing --subrepo completes (closes #1564)
* qimport: check for existing patches (fixes #1569)
* commit: ensure autoinc files are included (closes #737)
* shelve: verify chunks are non-empty before proceeding (closes #1552)
* repotreeitem: sort subrepos by name by default (closes #1251)
* status: don't use thgrepo in thread (refs #1505)
* branchop, etc: fix encoding of repo.namedbranches in branchop dialog comboBox
* update: default the confirmation to "cancel" (closes #1325)
* thread: catch socket errors including SSLError (closes #1520)

== Improvements ==

* supprt for Mercurial phases in repowidget
* shellext - support for largefile extension
* new registry keys for DiffMerge 3.3
* settings: add defaultpush configuration setting
* "Go To Revision" button with shortcut CTRL+/
* workbench: add shortcut for "rollback" command (Ctrl-u)
* reporegistry: add cmenu sort actions for groups (closes #1189)
* repofilter: add "author(username)" permanent query
* repofilter: add "bookmark()" permanent query
* settings: add defaultpush configuration setting
* manifestmodel: add method to filter files by glob pattern
* manifest: add filter box to file tree
* commit: show selected options (closes #1491)
* filedialogs, manifest: add "save at revision" to cmenu (closes #1500)
* commit: support --subprepos option in DetailsDialog (closes #1379)
* commit: handle tolocal conversion failures more gracefully (closes #1516)
* revpanel: add source revision item for converted changesets
* repomodel: add column for source revision of converted changesets

== Installer ==

* hgfold extension removed, it no longer worked with modern Mercurial
* added projrc extension - https://bitbucket.org/aragost/projrc/
* pulled latest TortoisePlink executables from TortoiseSVN, x64 and x86 versions
* upgraded to most recent TortoiseOverlay merge modules
* upgraded to most recent diff/merge scripts

----

= TortoiseHg 2.2.2 =

Released January 2, 2012

This is a bug fix release.  All users of 2.2.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 2.0.2

== Bug Fixes ==

* update: fixes for non-ascii branch names
* desktop: fix icon name (closes #1387)
* reporegistry, etc: allow non-ascii names to be submitted to clipboard
* visdiff: catch environment errors from snapshot file creation (closes #1499)
* rupdate: fix error when thg is run outside of the repository
* run: handle duplicated exceptions of the same type gracefully (fixes #1464)
* wconfig: translate ParsingError of iniparse to error.ParseError (refs #1512)

== Improvements ==

* repomodel: allow all patches to be reordered
* quickop: improved large file support
* quickop: improvements to initial check status
* status:  context menu for checking/unchecking selected files

----

= TortoiseHg 2.2.1 =

Released December 3, 2011

This is a bug fix release.  All users of 2.2.n are recommended to upgrade

== Packaged Versions ==

* Mercurial 2.0.1

== Bug Fixes ==

* commit: use cmd runner for rollback operations (fixes #1436)
* desktop: fix icon name (closes #1387)
* repowidget: manually reverse compress arguments (fixes #1344)
* thgrepo: wrap changectx.sub() to return thgrepo-aware subrepo obj (fixes #1386)
* chunks: catch ValueError from internalpatch (fixes #1249)
* commit: use command runner for rollback (fixes #1436)
* hgignore: catch IndexError while building pats list (fixes #1204)
* grep: fix #1428 rev and line are now sorted numerical
* manifest: don't test file status of directory node on doubleclick (fixes #1408)
* manifest: fix error while displaying subrepo (fixes #1386)
* repowidget: capture commit widget output (#1379)
* repowidget: manually reverse compress arguments (fixes #1344)
* shlib: call close() instead of rename() on Mercurial 2.0+ (fixes #1397)
* filedata: fix mode-only change detection on working dir
* grep: fix #1428 rev and line are now sorted numerical
* update: wctx.modified() is prone to throw EnvironmentError (closes #1435)
* visdiff: use os.makedirs() to re-create diff folder when necessary (fixes #1151)
* wctxactions: fix encoding of warning messages coming from hg

== Improvements ==

* commit: add several actions to subrepo context menu
* commit: make stand-alone dialog support mq
* rebase: add collapse rebased changesets option (fixes #1381)
* repomodel: more stable branch colors
* reporegistry: improve error handling while adding a subrepository
* repowidget: make double clicking an applied patch qgoto that patch (closes #1044)
* repowidget: add "Goto common ancestor" command in pop-up menu
* revdetails: add "Copy Path" in pop-up menu
* sync: add support for the --mq option in the sync tool
* workbench: add "Goto revision" command
