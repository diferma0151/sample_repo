= Release Notes for TortoiseHg =

This wiki page contains last minute notes to users about the releases,
which may not be included in the documentation or README files included
with the distribution kits.  It also contains change information, for
users who are interested in what bugs have been fixed, and what features
have been added in the current version.  See also the bug fixes and
enhancements made in the [[upcoming-release-notes|upcoming release]].

**Note that like TortoiseSVN, [[http://www.selenic.com/pipermail/mercurial/2010-January/029680.html|we recommend]] to to turn off the indexing service on the working copies and repositories, and exclude them from virus scans.**

<<toc>>

== Matching Versions ==

If you are using TortoiseHG from source, we recommend you use the most
recent stable releases of TortoiseHG and Mercurial together.  If you must use
an older version of Mercurial, please consult the following chart:

|= Mercurial Release |= TortoiseHg Release |
| <= 1.0 | 0.5 |
| 1.1.X | 0.6 |
| 1.2.X | 0.7.6 |
| 1.3.X | 0.8.n |
| 1.4.x | 0.9.n |
| 1.5.x | 1.0.n |
| 1.6.x | 1.1.n |
| 1.7.x | 1.1.9.1 |
| 1.8.x | 2.0.n |
| hg-main tip | thg default tip |

----

= TortoiseHg 2.0.3 =

Released April 1, 2011

This is a scheduled bug fix release with a number of minor improvements

== Packaged Versions ==

* Mercurial 1.8.2

== Bug Fixes ==

* #81 - improve labels of merge buttons in resolve dialog
* #161 - prevent qrename from using an existing patch name
* #174 - prevent file history from being launched from shelve dialog
* #193 - open visual diffs on double-click
* #229 - libsasl.dll was missing from x86 packages
* #269 - give quickop dialog the ability to delete unversioned files
* #282 - validate the correct postreview extension is in use
* #295 - shelve: fix race condition in detecting shelf file changes
* #300 - hgignore: catch errors during repo.status() call
* #302 - sync widget could show the lock button for local urls
* #306 - outgoing can cause IndexError in setRevisionSet
* #307 - fix crash in templatefilters caused by bad patches
* #311 - UnicodeDecodeError in rename dialog
* #318 - dragging URLs from registry to sync tab should not delete URL from registry
* #319 - Workbench: update sync tooltips to reflect their current behavior
* #325 - TypeError raised by os.path.isfile() in thgrepo.changectx()
* #328 - chunks: UnicodeDecodeError while moving chunks
* #330 - wctxactions: UnicodeDecodeError while showing warnings/errors
* #331 - sync: ignore .hg/rebasestate if --rebase was not used in command
* #335 - enforce maxdiffsize when displaying deleted files
* #336 - commit: clear branch operation after every successful commit
* #338 - grep: prevent AttributeError after stopping a search
* #340 - grep: catch I/O errors while scanning working directory
* #342 - repotreemodel: validate internalPointer(), prevent a TypeError
* #346 - UnicodeDecodeError in bug report dialog save function
* #347 - registry: fix deletion behavior
* #348 - Assign "changelog" font to revisioned text without a lexer
* #359 - LookupError from ambiguous revision set query
* #360 - Prevent certain tracebacks in file history dialogs
* #361 - shelve: catch environment errors while patching
* #364 - qfold: fix patch message decoding
* #371 - shelve: catch an empty patch being applied
* #373 - Fix abort when command needs a repository but was not within one
* #378 - dropping a patch on the MQ tab was broken
* #379 - backout: improve UI at the end of the operation
* #381 - commit: do not pre-check unknown files even when they match filter
* #387 - ignore: fix context menu behavior
* #391 - status: prevent errors on button presses when model is empty
* #393 - update: check subrepo status before using update --clean
* #401 - fix repeated visual diffs of working folder
* #402 - fileview: catch generic file and lookup errors
* #405 - sync: catch environment errors when opening a terminal
* #406 - sync: cast exceptions to strings before converting to unicode
* #408 - commit: prevent IndexError in message history maintenance
* #410 - guess: fix unicode decode errors in path display
* #411 - workbench: add unicode conversion when openRepo fails
* #412 - settings: add unicode conversion when repo does not exist
* #417 - repotreeitem: catch RepoError more cleanly
* #422 - hgemail: prevent exceptions on empty change messages
* #423 - annotate: properly handle bundle previews
* #429 - generically capture exceptions while gathering graph data
* #431 - sync: use the given port when querying server certificate
* #442 - shelve: respect user's patch.eol configuration
* #453 - fix translation of Filenames column
* #460 - status: catch more errors during refresh
* #467 - rejects: preserve eoln state of patch chunks
* #469 - prevent race conditions after pulling from a bundle
* #472 - fix color extension use from shells opened by THG
* #473 - displayed revision sets should respect current branch filter
* #474 - purge: give purge thread its own repo object, prevents hazards
* #478 - remember selected revision when toggling filter mode
* #489 - disable the hiding of the file history toolbars
* #493 - fix progress signals from output log widget
* Workbench: properly show search bar state at startup

== Improvements ==

* #247, #297 - commit: show progress bar, disable commit button, add a stop button during commit
* #313 - add transplant menu option to multiple-selection menus
* #366 - archive: support subrepositories
* #385 - merge: improve default merge message for named branch merges
* #436 - hide filter bar if cleared twice or return pressed on empty entry
* #458 - resolve: show local and other revision summaries
* grep: recursively scan Mercurial subrepositories when searching the working directory
* status: share status button with manifest tool
* serve: improve support for subrepositories
* sync: more effectively filter duplicate paths from related paths list
* Workbench: improve graph resize logic
* Workbench: close repository tabs by middle-click
* Workbench: display modified subrepositories in revision details tab
* fileview: add eoln visibility toggle to context menus
* Free entire repository tab widget when it is closed
* Better use of user configured Windows fonts

== Installer ==

= TortoiseHg 2.0.2 =

Released March 10, 2011

This is a quick fix build for a regression (#309) in 2.0.1.

= TortoiseHg 2.0.1 =

Released March 10, 2011

This is a bug fix release with minor improvements

== Packaged Versions ==

* Mercurial 1.8.1

== Bug Fixes ==

* #60, #201, #239 - drop bin/ folder, add root folder to %PATH%
* #78 - clone: use native path separators in path names
* #173 - manifest: IndexError: list index out of range
* #177 - show bookmarks in update dialog, fix bookmark behavior, improve bookmark dialog
* #178 - visdiff: KeyError from toolSelect
* #181 - visdiff: TypeError: p1dirdiff() takes exactly 2 arguments (1 given)
* #183 - visdiff: TypeError: argument of type 'NoneType' is not iterable
* #185 - settings: extensions page was confused by 'hgext.' prefixes
* #187 - documentation fix (f.i.)
* #189 - settings: no configuration for issue tracker linking
* #194 - qtlib: TypeError: signal clicked(bool) has 1 argument(s)Key
* #197 - fileview: fix diff markers in file mode
* #198 - compare file history: convert file data to unicode before displaying
* #202 - workbench: Abort: no username supplied (see "hg help config")
* #203 - compress: AttributeError: 'Widget' object has no attribute 'stbar'
* #204 - commit: "No files found for this operation"
* #205 - commit: handle non ASCII encoded filenames
* #209 - x64 Mercurial could not find 32bit diff/merge tools
* #212 - shelve: AttributeError: 'ChunksWidget' object has no attribute 'mtime'
* #213, #232 - repowidget: catch errors when selecting a revision
* #214 - settings: UnicodeDecodeError from username
* #225 - sync: catch ssh URL parse errors
* #227 - run: catch environment errors when opening repositories
* #228 - manifest: models leaked memory
* #229 - x86 packages did not have all the SVN SWIG DLLs
* #230 - about: do not block dialog closing on network errors
* #231 - AttributeError: 'SyncWidget' object has no attribute 'targetargs'
* #233 - sync: keep bundle file in local encoding
* #234 - clipboard: fix encoding of data sent to the clipboard
* #246 - merge: AttributeError: 'ResultPage' object has no attribute 'reject'
* #264 - sync: catch errors from fingerprint query
* #268 - show clean file contents
* #276 - unshelve not applying chunks to dos EOLN files
* Fix file dragging into applications like VisualStudio

== Improvements ==

* improve performance of sync tool startup, do not open related repositories
* preserve changeset graph column widths per repository
* improve sorting behavior in the status tool and its derivatives
* sync: add --debug flag to the options dialog
* verify and enforce minimum Qt/PyQt versions

== Installer ==

* x64 installers now provide 64bit native PyQt applications, which means they no longer install in Program Files (x86), they install in Program Files.
* hg.exe and thg.exe are in the %PATH% again, unlike the 2.0 installers.  The bin/ folder has been removed.
* kdiff3.exe is again in the %PATH%
* kdiff3.exe was upgraded from the 1.1 release to the 2.0 release.  It appears to have a bug when reading its old configuration files that cause it to save merge results in DOS EOLN.  If you are upgrading a 1.1 install or have run KDiff3 in the past, it is suggested to run the new KDiff3 and check this configurable.

= TortoiseHg 2.0 =

Released March 1, 2011

This is a major feature release.  All of the TortoiseHg applications
have been converted from PyGtk to PyQt.

* http://tortoisehg.bitbucket.org/manual/2.0/whatsnew.html
* http://tortoisehg.bitbucket.org/screenshots.html

== Packaged Versions ==

* Mercurial 1.8
* Qt 4.7.1
* PyQt 4.8.2
* dulwich 0.7.0

== Installer ==

* x64 installers now provide 64bit native PyQt applications, which means they no longer install in Program Files (x86), they install in Program Files.
* hg.exe and thg.exe are not in %PATH%, we add a bin\ folder with short batch files.  TortoisePlink and Pageant.exe are also in the bin\ folder so they remain in the path.
* kdiff3.exe is not in the system path, since it uses the same QT dlls as TortoiseHg it needs to be in the root folder.
* kdiff3.exe was upgraded from the 1.1 release to the 2.0 release.  It appears to have a bug when reading its old configuration files that cause it to save merge results in DOS EOLN.  If you are upgrading a 1.1 install or have run KDiff3 in the past, it is suggested to run the new KDiff3 and check this configurable.

----
